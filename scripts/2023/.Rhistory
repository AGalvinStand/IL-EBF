"intervention_teacher",
"pupil_support",
"extended_day_teacher",
"summerschool_teacher")
# manually replace column names
colnames(il_fy23_cvs_additionalinvestment_li_raw) <- new_names
# look at column names now
names(il_fy23_cvs_additionalinvestment_li_raw)
# cleaned data frame
il_fy23_cvs_additionalinvestment_li_clean <- il_fy23_cvs_additionalinvestment_li_raw
# ADDITIONAL INVESTMENTS - ENGLISH LEARNER  --------
il_fy23_cvs_additionalinvestment_el_raw <- read_excel("C:/Users/jpacas/Documents/GitHub/IL-EBF/data/raw/FY-23-Evidence-Based-Funding-Full-Calc.xlsx", sheet = 3,
skip = 63,n_max = 4)
# fix column names
il_fy23_cvs_additionalinvestment_el_raw <- il_fy23_cvs_additionalinvestment_el_raw |>
# convert colnames to lowercase
rename_with(tolower)
# look at column names
names(il_fy23_cvs_additionalinvestment_el_raw)
# new column names
# naming convention - delete# is the column number used to delete further
#                     down in the script
new_names <- c("grade",
"intervention_teacher",
"pupil_support",
"extended_day_teacher",
"summerschool_teacher",
"english_learner_core_teacher")
# manually replace column names
colnames(il_fy23_cvs_additionalinvestment_el_raw) <- new_names
# look at column names now
names(il_fy23_cvs_additionalinvestment_el_raw)
# cleaned data frame
il_fy23_cvs_additionalinvestment_el_clean <- il_fy23_cvs_additionalinvestment_el_raw
# ADDITIONAL INVESTMENTS - SPECIAL EDUCATION  --------
il_fy23_cvs_additionalinvestment_sped_raw <- read_excel("C:/Users/jpacas/Documents/GitHub/IL-EBF/data/raw/FY-23-Evidence-Based-Funding-Full-Calc.xlsx", sheet = 3,
skip = 70,n_max = 4)
# fix column names
il_fy23_cvs_additionalinvestment_sped_raw <- il_fy23_cvs_additionalinvestment_sped_raw |>
# convert colnames to lowercase
rename_with(tolower)
# look at column names
names(il_fy23_cvs_additionalinvestment_sped_raw)
# new column names
# naming convention - delete# is the column number used to delete further
#                     down in the script
new_names <- c("grade",
"sped_core_teacher",
"instructional_assistant",
"pyschologist")
# manually replace column names
colnames(il_fy23_cvs_additionalinvestment_sped_raw) <- new_names
# look at column names now
names(il_fy23_cvs_additionalinvestment_sped_raw)
# cleaned data frame
il_fy23_cvs_additionalinvestment_sped_clean <- il_fy23_cvs_additionalinvestment_sped_raw
# Remove raw data frames. Using fm to force through if
rm(il_fy23_cvs_additionalinvestment_el_raw,
il_fy23_cvs_additionalinvestment_li_raw,
il_fy23_cvs_additionalinvestment_sped_raw,
il_fy23_cvs_assumedsalary_raw,
il_fy23_cvs_avgsalary_raw,
il_fy23_cvs_core_class_size_raw,
il_fy23_cvs_core_investments_raw,
il_fy23_cvs_core_subsalary_raw,
il_fy23_cvs_perstudent_centralservices_raw,
il_fy23_cvs_perstudent_investment_perstudent_raw,
il_fy23_cvs_protoschool_raw)
View(il_fy23_cvs_additionalinvestment_el_clean)
View(il_fy23_cvs_core_subsalary_clean)
View(il_fy23_cvs_core_investments_clean)
View(il_fy23_cvs_perstudent_investment_perstudent_clean)
View(il_fy23_cvs_core_investments_clean)
View(il_fy23_cvs_assumedsalary_clean)
View(il_fy23_cvs_additionalinvestment_li_clean)
il_fy23_enroll_all_raw <- read_excel("C:/Users/jpacas/Documents/GitHub/IL-EBF/data/raw/FY-23-Evidence-Based-Funding-Full-Calc.xlsx", sheet = 9, skip = 4, n_max = 927)
View(il_fy23_enroll_all_raw)
View(il_fy23_enroll_all_raw)
options(scipen = 999)
library(tidyverse)
library(readxl)
# --------------
#             SHEET TABLE OF CONTENTS
#--------------------------------------------
#       SHEET NAME          - SHEET NUMBER
#--------------------------------------------
# District Results Summary  - 1
# Base Calc                 - 2
# Control Variables         - 3
# Core Investments          - 4
# Per Student Investments   - 5
# Additional Investments    - 6
# Local Capacity Target     - 7
# Tier $                    - 8
# ENROLL-ALL                - 9
# ENROLL- LOW INCOME        - 10
# ENROLL - LI - ROE         - 11
#  ROE-LI Data              - 12
# ENROLL - EL               - 13
# REGION FACTOR             - 14
# ADJUSTED OTR              - 15
# ADJUSTED_EAV              - 16
# REAL EAV CALC             - 17
# PTELL EAV CALC            - 18
# FY 21 BFM                 - 19
# clean --------------
# load il ebf raw data -  skip to row four. Referencing the FY22-EBF..xlsx
#                         to clean the column names
report_card <- read_excel("C:/Users/jpacas/Documents/GitHub/IL-EBF/data/raw/2022-Report-Card-Public-Data-Set.xlsx", sheet = "General")
View(report_card)
# fix column names
report_card <- report_card |>
# convert colnames to lowercase
rename_with(report_card)
report_card <- report_card |>
# convert colnames to lowercase
rename_with(tolower)
names(report_card)
report_card_clean <- report_card[,(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23)]
report_card_clean <- report_card[(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23)]
report_card_clean <- report_card[(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23)]
report_card_clean <- report_card[c(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23)]
View(report_card_clean)
report_card_clean <- report_card[c(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23), na.rm = TRUE]
View(report_card_clean)
report_card_clean <- report_card[c(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23), na.rm = FALSE]
View(report_card_clean)
options(scipen = 999)
library(tidyverse)
library(dplyr)
library(readr)
library(fuzzyjoin)
library(writexl)
#Read in ISBE dataset
report_card <- read_excel("C:/Users/jpacas/Documents/GitHub/IL-EBF/data/raw/2022-Report-Card-Public-Data-Set.xlsx", sheet = "General")
options(scipen = 999)
library(tidyverse)
library(dplyr)
library(readr)
library(writexl)
library(readxl)
#Read in ISBE dataset
report_card <- read_excel("C:/Users/jpacas/Documents/GitHub/IL-EBF/data/raw/2022-Report-Card-Public-Data-Set.xlsx", sheet = "General")
table(report_card$Type)
#Prune unwanted variables
report_card_clean <- report_card[c(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23)]
#Keep only Districts
report_card_clean <- subset(report_card_clean, Type=="District")
#Truncate the last two digits for RCDTS to match DISTID
report_card_clean$RCDTS=substr(report_card_clean$RCDTS,1,13)
#Rename variables
new_names <- c("RCDTS",
"school_type",
"district_name",
"county",
"total_student_enroll",
"white_per",
"black_per",
"latino_per",
"asian_per",
"pacific_per",
"native_per",
"multiple_per")
# manually replace column names
colnames(report_card_clean) <- new_names
#Create flag for majority-minority districts
report_card_clean$major_minor <- as.factor(ifelse(report_card_clean$white_per > 50, 0, 1))
report_card_clean <- transform(report_card_clean, nonwhite_per = 100 - white_per)
#######################
#Read in EBF datasets and merge with report card data
#######################
#Read in EBF_base_calc datasets
ebf_base_calc <- readRDS("C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc.rds")
ebf_base_calc_race <- left_join(ebf_base_calc, report_card_clean,
by = c("distid" = "RCDTS"), na_matches = "never")
#Read in EBF_base_calc with concentrated poverty datasets
ebf_base_calc_conpov <- readRDS("C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc_conpov.rds")
ebf_base_calc_conpov_race <- left_join(ebf_base_calc_conpov, report_card_clean,
by = c("distid" = "RCDTS"), na_matches = "never")
View(ebf_base_calc_conpov_race)
View(ebf_base_calc_race)
ebf_base_calc_race <- transform(ebf_base_calc_race, ifelse(ebf_base_calc_race$major_minor==1,
addl_race_invest = total_nonwhite * 75,
addl_race_invest = total_nonwhite * 25)
)
#  additional (K-12) teach = 71,494. 125 students per 1 FTE intervention teacher, 25 for all, 75 for majority nonwhite
ebf_base_calc_race <- transform(ebf_base_calc_race, ifelse(ebf_base_calc_race$major_minor=1,
View(ebf_base_calc_race)
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(ebf_base_calc_race$major_minor==1,
total_nonwhite * 75,
total_nonwhite * 25)
)
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25)
)
View(ebf_base_calc_conpov_race)
View(ebf_base_calc_race)
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25,  na.rm=TRUE)
)
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25),  na.rm=TRUE
)
#  additional (K-12) teach = 71,494. 125 students per 1 FTE intervention teacher, 25 for all, 75 for majority nonwhite
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = (ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25, na.rm=TRUE)
)
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = (ifelse(ebf_base_calc_race$major_minor==1,
#  additional (K-12) teach = 71,494. 125 students per 1 FTE intervention teacher, 25 for all, 75 for majority nonwhite
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = (ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25, na.rm=TRUE))
)
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(!is.na(major_minor) & ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25,)
)
#  additional (K-12) teach = 71,494. 125 students per 1 FTE intervention teacher, 25 for all, 75 for majority nonwhite
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25,)
)
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25)
)
View(ebf_base_calc_race)
options(scipen = 999)
library(tidyverse)
library(dplyr)
library(readr)
library(writexl)
library(readxl)
#Read in ISBE dataset
report_card <- read_excel("C:/Users/jpacas/Documents/GitHub/IL-EBF/data/raw/2022-Report-Card-Public-Data-Set.xlsx", sheet = "General")
table(report_card$Type)
#Prune unwanted variables
report_card_clean <- report_card[c(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23)]
#Keep only Districts
report_card_clean <- subset(report_card_clean, Type=="District")
#Truncate the last two digits for RCDTS to match DISTID
report_card_clean$RCDTS=substr(report_card_clean$RCDTS,1,13)
#Rename variables
new_names <- c("RCDTS",
"school_type",
"district_name",
"county",
"total_student_enroll",
"white_per",
"black_per",
"latino_per",
"asian_per",
"pacific_per",
"native_per",
"multiple_per")
# manually replace column names
colnames(report_card_clean) <- new_names
#Create flag for majority-minority districts
report_card_clean$major_minor <- as.factor(ifelse(report_card_clean$white_per > 50, 0, 1))
report_card_clean <- transform(report_card_clean, nonwhite_per = 100 - white_per)
#######################
#Read in EBF datasets and merge with report card data
#######################
#Read in EBF_base_calc datasets
ebf_base_calc <- readRDS("C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc.rds")
ebf_base_calc_race <- left_join(ebf_base_calc, report_card_clean,
by = c("distid" = "RCDTS"), na_matches = "never")
#Read in EBF_base_calc with concentrated poverty datasets
ebf_base_calc_conpov <- readRDS("C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc_conpov.rds")
ebf_base_calc_conpov_race <- left_join(ebf_base_calc_conpov, report_card_clean,
by = c("distid" = "RCDTS"), na_matches = "never")
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target = final_adequacy_target + addl_race_invest,
final_percent_adequacy = final_resources / final_adequacy_target_race)
#  additional (K-12) teach = 71,494. 125 students per 1 FTE intervention teacher, 25 for all, 75 for majority nonwhite
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25)
)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target = final_adequacy_target + addl_race_invest,
final_percent_adequacy = final_resources / final_adequacy_target_race)
View(ebf_base_calc_race)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target = final_adequacy_target + addl_race_invest)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target_orig = final_adequacy_target)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target = final_adequacy_target_orig + addl_race_invest)
options(scipen = 999)
library(tidyverse)
library(dplyr)
library(readr)
library(writexl)
library(readxl)
#Read in ISBE dataset
report_card <- read_excel("C:/Users/jpacas/Documents/GitHub/IL-EBF/data/raw/2022-Report-Card-Public-Data-Set.xlsx", sheet = "General")
table(report_card$Type)
#Prune unwanted variables
report_card_clean <- report_card[c(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23)]
#Keep only Districts
report_card_clean <- subset(report_card_clean, Type=="District")
#Truncate the last two digits for RCDTS to match DISTID
report_card_clean$RCDTS=substr(report_card_clean$RCDTS,1,13)
#Rename variables
new_names <- c("RCDTS",
"school_type",
"district_name",
"county",
"total_student_enroll",
"white_per",
"black_per",
"latino_per",
"asian_per",
"pacific_per",
"native_per",
"multiple_per")
# manually replace column names
colnames(report_card_clean) <- new_names
#Create flag for majority-minority districts
report_card_clean$major_minor <- as.factor(ifelse(report_card_clean$white_per > 50, 0, 1))
report_card_clean <- transform(report_card_clean, nonwhite_per = 100 - white_per)
#######################
#Read in EBF datasets and merge with report card data
#######################
#Read in EBF_base_calc datasets
ebf_base_calc <- readRDS("C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc.rds")
ebf_base_calc_race <- left_join(ebf_base_calc, report_card_clean,
by = c("distid" = "RCDTS"), na_matches = "never")
#Read in EBF_base_calc with concentrated poverty datasets
ebf_base_calc_conpov <- readRDS("C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc_conpov.rds")
ebf_base_calc_conpov_race <- left_join(ebf_base_calc_conpov, report_card_clean,
by = c("distid" = "RCDTS"), na_matches = "never")
#######################
#Create race weights
#######################
#  additional (K-12) teach = 71,494. 125 students per 1 FTE intervention teacher, 25 for all, 75 for majority nonwhite
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25)
)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target_orig = final_adequacy_target,
final_percent_adequacy_orig = final_percent_adequacy)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target = final_adequacy_target_orig + addl_race_invest,
final_percent_adequacy = final_resources / final_adequacy_target_race
)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target = final_adequacy_target_orig + addl_race_invest,
final_percent_adequacy = final_resources / final_adequacy_target
)
View(ebf_base_calc_race)
View(ebf_base_calc_conpov_race)
options(scipen = 999)
library(tidyverse)
library(dplyr)
library(readr)
library(writexl)
library(readxl)
#Read in ISBE dataset
report_card <- read_excel("C:/Users/jpacas/Documents/GitHub/IL-EBF/data/raw/2022-Report-Card-Public-Data-Set.xlsx", sheet = "General")
table(report_card$Type)
#Prune unwanted variables
report_card_clean <- report_card[c(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23)]
#Keep only Districts
report_card_clean <- subset(report_card_clean, Type=="District")
#Truncate the last two digits for RCDTS to match DISTID
report_card_clean$RCDTS=substr(report_card_clean$RCDTS,1,13)
#Rename variables
new_names <- c("RCDTS",
"school_type",
"district_name",
"county",
"total_student_enroll",
"white_per",
"black_per",
"latino_per",
"asian_per",
"pacific_per",
"native_per",
"multiple_per")
# manually replace column names
colnames(report_card_clean) <- new_names
#Create flag for majority-minority districts
report_card_clean$major_minor <- as.factor(ifelse(report_card_clean$white_per > 50, 0, 1))
report_card_clean <- transform(report_card_clean, nonwhite_per = 100 - white_per)
#######################
#Read in EBF datasets and merge with report card data
#######################
#Read in EBF_base_calc datasets
ebf_base_calc <- readRDS("C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc.rds")
ebf_base_calc_race <- left_join(ebf_base_calc, report_card_clean,
by = c("distid" = "RCDTS"), na_matches = "never")
#Read in EBF_base_calc with concentrated poverty datasets
ebf_base_calc_conpov <- readRDS("C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc_conpov.rds")
ebf_base_calc_conpov_race <- left_join(ebf_base_calc_conpov, report_card_clean,
by = c("distid" = "RCDTS"), na_matches = "never")
#######################
#Create race weights
#######################
#25 for all, 75 for majority nonwhite
#EBF base calc
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25)
)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target_orig = final_adequacy_target,
final_percent_adequacy_orig = final_percent_adequacy)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target = final_adequacy_target_orig + addl_race_invest,
final_percent_adequacy = final_resources / final_adequacy_target
)
write_rds(ebf_base_calc_race,"C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc_race.rds")
#EBF base calc with concentrated poverty
ebf_base_calc_conpov_race <- transform(ebf_base_calc_conpov_race,  addl_race_invest = ifelse(ebf_base_calc_conpov_race$major_minor==1,
total_ase * 75,
total_ase * 25)
)
ebf_base_calc_conpov_race <- transform(ebf_base_calc_conpov_race,
final_adequacy_target_orig = final_adequacy_target,
final_percent_adequacy_orig = final_percent_adequacy)
ebf_base_calc_conpov_race <- transform(ebf_base_calc_conpov_race,
final_adequacy_target = final_adequacy_target_orig + addl_race_invest,
final_percent_adequacy = final_resources / final_adequacy_target
)
write_rds(ebf_base_calc_conpov_race,"C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc_conpov_race.rds")
View(ebf_base_calc_conpov_race)
View(ebf_base_calc_race)
options(scipen = 999)
library(tidyverse)
library(dplyr)
library(readr)
library(writexl)
library(readxl)
#Read in ISBE dataset
report_card <- read_excel("C:/Users/jpacas/Documents/GitHub/IL-EBF/data/raw/2022-Report-Card-Public-Data-Set.xlsx", sheet = "General")
table(report_card$Type)
#Prune unwanted variables
report_card_clean <- report_card[c(1, 2, 4, 6, 16, 17, 18, 19, 20, 21, 22, 23)]
#Keep only Districts
report_card_clean <- subset(report_card_clean, Type=="District")
#Truncate the last two digits for RCDTS to match DISTID
report_card_clean$RCDTS=substr(report_card_clean$RCDTS,1,13)
#Rename variables
new_names <- c("RCDTS",
"school_type",
"district_name",
"county",
"total_student_enroll",
"white_per",
"black_per",
"latino_per",
"asian_per",
"pacific_per",
"native_per",
"multiple_per")
# manually replace column names
colnames(report_card_clean) <- new_names
#Create flag for majority-minority districts
report_card_clean$major_minor <- as.factor(ifelse(report_card_clean$white_per > 50, 0, 1))
report_card_clean <- transform(report_card_clean, nonwhite_per = 100 - white_per)
#######################
#Read in EBF datasets and merge with report card data
#######################
#Read in EBF_base_calc datasets
ebf_base_calc <- readRDS("C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc.rds")
ebf_base_calc_race <- left_join(ebf_base_calc, report_card_clean,
by = c("distid" = "RCDTS"), na_matches = "never")
#Read in EBF_base_calc with concentrated poverty datasets
ebf_base_calc_conpov <- readRDS("C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc_conpov.rds")
ebf_base_calc_conpov_race <- left_join(ebf_base_calc_conpov, report_card_clean,
by = c("distid" = "RCDTS"), na_matches = "never")
View(ebf_base_calc_conpov_race)
View(ebf_base_calc_race)
#######################
#Create race weights
#######################
#25 for all, 75 for majority nonwhite
#EBF base calc
ebf_base_calc_race <- transform(ebf_base_calc_race,  addl_race_invest = ifelse(ebf_base_calc_race$major_minor==1,
total_ase * 75,
total_ase * 25)
)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target_orig = final_adequacy_target,
final_percent_adequacy_orig = final_percent_adequacy)
ebf_base_calc_race <- transform(ebf_base_calc_race,
final_adequacy_target = final_adequacy_target_orig + addl_race_invest,
final_percent_adequacy = final_resources / final_adequacy_target
)
write_rds(ebf_base_calc_race,"C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc_race.rds")
#EBF base calc with concentrated poverty
ebf_base_calc_conpov_race <- transform(ebf_base_calc_conpov_race,  addl_race_invest = ifelse(ebf_base_calc_conpov_race$major_minor==1,
total_ase * 75,
total_ase * 25)
)
ebf_base_calc_conpov_race <- transform(ebf_base_calc_conpov_race,
final_adequacy_target_orig = final_adequacy_target,
final_percent_adequacy_orig = final_percent_adequacy)
ebf_base_calc_conpov_race <- transform(ebf_base_calc_conpov_race,
final_adequacy_target = final_adequacy_target_orig + addl_race_invest,
final_percent_adequacy = final_resources / final_adequacy_target
)
write_rds(ebf_base_calc_conpov_race,"C:/Users/jpacas/Documents/GitHub/IL-EBF/scripts/shiny/ebf_sim/data/ebf_base_calc_conpov_race.rds")
View(ebf_base_calc_conpov_race)
View(ebf_base_calc_race)
